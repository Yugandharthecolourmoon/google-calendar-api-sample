(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){e.exports=n(37)},19:function(e,t,n){},21:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(2),c=n.n(o),s=(n(19),n(4)),i=n(5),l=n(7),u=n(6),m=n(8),d=n(3),v=(n(21),function(e){if(e.status>=200&&e.status<300)return e;var t=new Error("HTTP Error ".concat(e.statusText));throw t.status=e.statusText,t.response=e,console.log(t),t}),f=function(e){return e.json()},h={index:function(e,t){return fetch("/api/events",{method:"POST",accept:"application/json",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:new Date(e).toISOString().substr(0,10)})}).then(v).then(f).then(t)},create:function(e,t){return fetch("/api/event",{method:"POST",accept:"application/json",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(v).then(f).then(t)},destroy:function(e,t){return fetch("/events/".concat(e),{method:"DELETE",accept:"application/json"}).then(v).then(f).then(t)}},E=function(e){var t=e.event,n=function(e){h.destroy(e.id,function(e){console.log(e)})};return r.a.createElement("tr",{onClick:function(e){return n(t)}},r.a.createElement("td",null,t.start.date?t.start.date:t.start.dateTime),r.a.createElement("td",null,t.summary),r.a.createElement("td",null,t.location),r.a.createElement("td",{className:"text-center"},r.a.createElement("button",{type:"button",className:"btn btn-outline-warning text-right",onClick:function(e){return n(t)}},"Done")))},p=function(e){var t=e.events;console.log(t);var n=t.map(function(e){return r.a.createElement(E,{key:e.id,event:e})}),a=r.a.createElement("tr",null,r.a.createElement("td",{className:"text-center",colSpan:4},"No events found."));return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Event date"),r.a.createElement("th",null,"Summary"),r.a.createElement("th",null,"Location"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,t.length>0?n:a))))))},y=n(12),b=n.n(y),g=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={summary:"",startTime:(new Date).getTime(),hasSent:!1,newEvent:""},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"typingEvent",value:function(e){this.setState({summary:e,hasSent:!1})}},{key:"onPressEnter",value:function(e){var t=this;if("Enter"===e){if(!this.state.summary||""===this.state.summary.trim())return void alert("Event summary is required.");var n={summary:this.state.summary,date:this.state.startTime};h.create(n,function(e){t.setState({newEvent:e.summary,summary:"",hasSent:!0})})}}},{key:"onFetchClick",value:function(){var e=this;h.index(this.state.startTime,function(t){e.props.onNewEventSent(t)})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Event Date"),r.a.createElement(b.a,{utc:!0,value:new Date,onChange:function(t){e.setState({startTime:new Date(t).getTime()})}}))),r.a.createElement("div",{className:"col-md-7"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Event summary"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Enter your new task and press enter.",value:this.state.summary,onChange:function(t){return e.typingEvent(t.target.value)},onKeyPress:function(t){return e.onPressEnter(t.key)}})))),r.a.createElement("div",{className:"col-md-2 text-right"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"col-md-12"},"\xa0"),r.a.createElement("button",{type:"button",className:"btn btn-success",onClick:function(t){return e.onPressEnter("Enter")}},"Add Event")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 p-3"},r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(t){return e.onFetchClick()}},"Fetch Events"))))}}]),t}(a.Component),w=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).loadEvents=n.loadEvents.bind(Object(d.a)(Object(d.a)(n))),n.state={events:[],hasBeenModified:!1},n.loadEvents(),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"loadEvents",value:function(){var e=this;h.index(new Date,function(t){console.log(t),e.setState({events:t,shouldReload:!1})})}},{key:"forceUpdateHandler",value:function(){this.forceUpdate()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(g,{onNewEventSent:function(t){return e.setState({events:t,hasBeenModified:!0})}}),r.a.createElement(p,{events:this.state.events,onClick:this.forceUpdateHandler}))}}]),t}(a.Component),N=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function k(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}c.a.render(r.a.createElement(w,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");N?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):k(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):k(e)})}}()}},[[13,2,1]]]);
//# sourceMappingURL=main.38e3b0c0.chunk.js.map